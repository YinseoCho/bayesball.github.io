<form name=input>

<h1 align="center">Learning About Difference of 2 Proportions
</h1>

<script>

function betas()
{
var s1=gamms(document.input.a1.value);
var t1=gamms(document.input.b1.value);
var s2=gamms(document.input.a2.value);
var t2=gamms(document.input.b2.value);
var p1=1;
var p2=1;
var d=1;
var freq=new Array(20);
var prob=new Array(20)
j=1;
k=1;

for (var i=0; i<20; i++)
{
freq[i]=0;
}

for (var i = 0; i < 1000; i++)
{
 p1=s1[i]/(s1[i]+t1[i]);
 p2=s2[i]/(s2[i]+t2[i]);
 d=p1-p2;
 j=Math.floor(20*(d+1)/2);
 freq[j]=freq[j]+1;
}

for (var i=0; i<20; i++)
{
j=2*i; k=j+1;
document.tally[j].value=freq[i];
document.tally[k].value=freq[i]/1000;
}

}

function gamms(alpha)
{
var id=false;
var v1=1;
var v2=1;
var n=1000;
var ss=0;
var a=alpha-1;

var s = new Array(n);

for (var i = 0; i < n; i++)
{
   id=false;
	while (id==false)
	{
		v1=-Math.log(Math.random());
		v2=-Math.log(Math.random());
		id=(v2>=(a*(v1-Math.log(v1)-1)));
	}
	s[i]=alpha*v1;
	ss=ss+s[i];
}
return(s);
}


</script>

<div align="center">
  <center>
<table border="1" width="337" height="103">
  <tr>
    <td colspan="2" height="44" width="151">
      <p align="center">Beta curve for p1</p>
    </td>
    <td width="170" colspan="2" height="44">
      <p align="center">
      Beta curve for p2</p>
    </td>
  </tr>
  <tr>
    <td width="79" height="47" align="center">a1 = <input type="text" name="a1" size="5"></td>
    <td width="66" height="47" align="center">b1 = <input type="text" name="b1" size="5"></td>
    <td width="80" height="47" align="center">a2 = <input type="text" name="a2" size="5"></td>
    <td width="84" height="47" align="center">b2 = <input type="text" name="b2" size="5"></td>
  </tr>
</table>
  </center>
</div>
<p align="center">

<input type="button" value="Simulate." onClick="betas()">
</form>
 &nbsp;
</p>
<p align="center">

Grouped count table of 1000 simulated values of d=p1-p2:
</p>
<div align="center">
  <center>
  <form name=tally>
  <table border="1" width="43%">
    <tr>
      <td width="36%" align="center">d = p1 - p2</td>
      <td width="28%" align="center">Count</td>
      <td width="36%" align="center">Probability</td>
    </tr>
    <tr>
      <td width="36%" align="center">(-1, -.9)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(-.9, -.8)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(-.8, -.7)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(-.7, -.6)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(-.6, -.5)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(-.5, -.4)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(-.4, -.3)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(-.3, -.2)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(-.2, -.1)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(-.1, 0)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(0, .1)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(.1, .2)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(.2, .3)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(.3, .4)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(.4, .5)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(.5, .6)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(.6, .7)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(.7, .8)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(.8, .9)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
    <tr>
      <td width="36%" align="center">(.9, 1)</td>
      <td width="28%" align="center"><input type="text" value="0" size="7"></td>
      <td width="36%" align="center"><input type="text" value="0" size="7"></td>
    </tr>
  </table>
  </form>
  </center>
</div>
